$def with (gv)

<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"></meta>
    </head>
<body>
    <H3>YAWPI - Yet Another Watering system for raspberry PI</H3>
    <p></p>
    System name: <b>$gv.gs['Name']</b>
    <br>
    SW Version: <b>$gv.gs['Version']</b>
    <br>
    RPi Revision: <b>$gv.hw.RPiRevision</b>
    <br>
    Device date and time: <b>$gv.cv['TimeStr']</b>
    <p></p>
    <b>Status</b>
    <br>
    Operation:
        <b>
        $if gv.gs['Enabled']:
            <font color='green'>Running</font>
        $else:
            <font color='red'>Stopped</font>
        </b> 
    <br>
    Loging:
        <b>
        $if gv.gs['Logging']:
            <font color='green'>Enabled</font>, limit:
                $if gv.gs['LoggingLimit'] == 0:
                    unlimited
                $else:
                    $gv.gs['LoggingLimit'] lines
        $else:
            <font color='red'>Stopped</font>
        </b>
    <br>
    <p></p>
    <b>Sensors: </b>
    $if 'temp' in gv.hw.Sensors:
            <br>
            Temperature sensor: <b>$gv.cv['SeTemp'] &deg</b>
    $if 'press' in gv.hw.Sensors:
            <br>
            Pressure sensor: <b>$"{:.0f}".format(gv.cv['SePress']) Pa</b>
    $if 'humid' in gv.hw.Sensors:
            <br>
            Humidity sensor: <b>$"{:.0f}".format(gv.cv['SeHumid']) %</b>
    $if 'rain' in gv.hw.Sensors:
            <br>
            Rain sensor: <b>$gv.cv['SeRain'] mm</b>
    $if 'illum' in gv.hw.Sensors:
            <br>
            Illuminance sensor: <b>$"{:.0f}".format(gv.cv['SeIllum']) lux</b>
    <p></p>
    <b>Source:</b>
    <br>
    Water level: <b>$'{:.0f}'.format(gv.cv['SoWL'] * 100) %</b>
    <p></p>
    <b>Stations status</b>
    <table border="1">
        <tbody>
            <tr>
                <td>
                    No
                </td>
                <td>
                    Name
                </td>
                <td>
                    Water Level
                </td>
                <td>
                    Running
                </td>
                <td>
                    Next Run
                </td>
            </tr>
            $for i in range(gv.hw.StNo)
                <tr>
                    <td>
                        $i
                    </td>
                    <td>
                        $gv.hws['StData'][i]['Name']
                    </td>
                    <td>
                        $'{:.0f}'.format(gv.cv['StWL'][i] * 100) %
                    </td>
                    <td>
                        $if gv.hw.StStatus[i]:
                            <font color='red'>Yes</font>
                        $else:
                            No
                    </td>
                    <td>
                       - 
                    </td>
                </tr>
        </tbody>
    </table>
    <p></p>
    <form method="post"> 
        <button name="reload" title="Refresh this page"><img src="static/icons/update.png" align="absmiddle"> Refresh</button>
        <button name="runnow" title="Run now"><img src="static/icons/run_now.png" align="absmiddle"> Run now</button>
        <button name="options" title="Change options"><img src="static/icons/options.png" align="absmiddle"> Options</button>
        <button name="stations" title="List of stations and change settings"><img src="static/icons/stations.png" align="absmiddle"> Stations</button>
        <button name="programs" title="Show programs and change settings"><img src="static/icons/programs.png" align="absmiddle"> Programs</button>
        <button name="log" title="Show log of events"><img src="static/icons/log.png" align="absmiddle"> Log</button>
        <button name="history" title="Show history"><img src="static/icons/history.png" align="absmiddle"> History</button>
        $if gv.gs['Enabled']:
            <button name="stop" title="Stop all programs"><img src="static/icons/stop.png" align="absmiddle"> Stop</button>
        $else:
            <button name="start" title="Start enabled programs"><img src="static/icons/start.png" align="absmiddle"> Start</button>
        <button name="reboot" title="Reboot system"><img src="static/icons/quit.png" align="absmiddle"> Reboot</button>
    </form>
</body>
</html>
